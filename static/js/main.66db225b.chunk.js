(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,function(t,n,e){t.exports=e(17)},,,,,,function(t,n,e){},function(t,n,e){},,function(t,n,e){},function(t,n,e){},function(t,n,e){"use strict";e.r(n);var a=e(0),o=e.n(a),r=e(2),c=e.n(r),i=(e(12),e(1)),s=new Set(["00","01","02","21","22","33"]);e(13);var u=e(3),l=e.n(u),f=e(5),m=(e(15),new Set([15997,15998,15999,16e3,16001,16002,16003,16004,16191,16192,16193,16194,16195,16196,7418,16483])),d=new Set([3559,116,114]);function v(t){var n=t.actionId,e=t.additionalClasses,a=o.a.useState(),r=Object(i.a)(a,2),c=r[0],s=r[1];return o.a.useEffect(function(){var t=!0;return Object(f.a)(l.a.mark(function e(){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://xivapi.com/Action/".concat(n),{mode:"cors"});case 2:return e.next=4,e.sent.json();case 4:a=e.sent,t&&s(a);case 6:case"end":return e.stop()}},e)}))(),function(){t=!1}},[n]),void 0!==c&&c.Icon?o.a.createElement("img",{className:m.has(n)||!d.has(n)&&4!==c.ActionCategory.ID?"gcd ".concat(e):"ogcd ".concat(e),src:"https://xivapi.com/".concat(c.Icon),alt:c.Name||""}):null}e(16);function p(t){var n=t.encounterId,e=t.name,a=t.actionList,r=o.a.useState(!1),c=Object(i.a)(r,2),s=c[0],u=c[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:s?"rotation-button expanded":"rotation-button",onClick:function(){u(function(t){return!t})}},0===n?"Current Rotation":e),o.a.createElement(h,{expanded:s,actionList:a}))}function h(t){var n=t.expanded,e=t.actionList;return n?o.a.createElement("div",{className:"rotation-list"},e.map(function(t,n){return o.a.createElement(v,{key:n,actionId:t})})):null}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(function(){var t=o.a.useState([]),n=Object(i.a)(t,2),e=n[0],a=n[1],r=o.a.useState([]),u=Object(i.a)(r,2),l=u[0],f=u[1];return o.a.useEffect(function(){var t,n="",e=-1,o="Unknown",r=1,u=function t(n){var e=new URLSearchParams(window.location.search),a="".concat(e.get("HOST_PORT"),"BeforeLogLineRead")||!1,o=new WebSocket(a);return o.onerror=function(){return o.close()},o.onclose=function(){return setTimeout(function(){t(n)},1e3)},o.onmessage=function(t,e){if("."===t.data)return o.send(".");var a=JSON.parse(t.data);if("SendCharName"===a.msgtype)return n(a.msg,null);if("Chat"===a.msgtype){var r=a.msg.substring(0,2);if(s.has(r))return n(a.msg,r)}},o}(function(s,u){var l=function(t){f(function(t){return t[0]&&t[0].rotation&&t[0].rotation.length<=0&&t.shift(),t.unshift({name:o,rotation:[]}),t.slice(0,3)})};if(s.charID)return t=s.charID,void l();switch(u){case"00":var m=s.split("|"),d=Object(i.a)(m,5),v=d[2],p=d[4];return void("0038"===v&&"end"===p&&l());case"01":var h=s.split("|"),w=Object(i.a)(h,4)[3];return void(o=w);case"02":var b=s.split("|"),g=Object(i.a)(b,3)[2];return t=parseInt(g,16),void l();case"33":var E=s.split("|"),I=Object(i.a)(E,4)[3];return void("40000012"!==I&&"40000010"!==I||l())}if(void 0!==t){var k=s.split("|"),O=Object(i.a)(k,5),S=O[1],j=O[2],y=O[4];if(parseInt(j,16)===t){var x=parseInt(y,16);if(!(x<=8||S===n&&x===e)){Date.now()-Date.parse(n)>12e4&&l(),n=S,e=x;var N=r%256+1;r=N,c.a.unstable_batchedUpdates(function(){a(function(t){return t.concat({action:x,key:N})}),f(function(t){return t[0]||(t[0]={name:o,rotation:[]}),t[0].rotation.push(x),t})}),setTimeout(function(){a(function(t){return t.slice(1)})},1e4)}}}});return function(){u.close()}},[]),o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"actions"},e.map(function(t){var n=t.action,e=t.key;return o.a.createElement(v,{key:e,actionId:n,additionalClasses:"action-move"})})),l.map(function(t,n){return o.a.createElement(p,{key:n,encounterId:n,name:t.name,actionList:t.rotation})}))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}],[[6,1,2]]]);
//# sourceMappingURL=main.66db225b.chunk.js.map